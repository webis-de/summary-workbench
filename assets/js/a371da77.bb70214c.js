"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[780],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(n),d=r,k=m["".concat(p,".").concat(d)]||m[d]||c[d]||i;return n?a.createElement(k,o(o({ref:t},u),{},{components:n})):a.createElement(k,o({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[m]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5658:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:1,title:"Setup Quickstart"},o=void 0,l={unversionedId:"setup_quickstart",id:"setup_quickstart",title:"Setup Quickstart",description:"Setup",source:"@site/docs/setup_quickstart.md",sourceDirName:".",slug:"/setup_quickstart",permalink:"/summary-workbench/setup_quickstart",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/setup_quickstart.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Setup Quickstart"},sidebar:"tutorialSidebar",previous:{title:"Usage",permalink:"/summary-workbench/"},next:{title:"Configuration",permalink:"/summary-workbench/configuration"}},p={},s=[{value:"Setup",id:"setup",level:2},{value:"First application",id:"first-application",level:2},{value:"Extern Environment",id:"extern-environment",level:2}],u={toc:s};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"setup"},"Setup"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install python, docker, and docker-compose and start the docker service"),(0,r.kt)("li",{parentName:"ol"},"Open a terminal, clone the repository and go to the repository root"),(0,r.kt)("li",{parentName:"ol"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"pip install -r requirements.txt"),", which will install all neccessary packages for the ./configure.py script")),(0,r.kt)("h2",{id:"first-application"},"First application"),(0,r.kt)("p",null,"Create a file named ",(0,r.kt)("inlineCode",{parentName:"p"},"my.sw-config.yaml")," in the project root and write the following content to the file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"extern_environment:\n  THREADS: 4\n  BATCH_SIZE: 32\n  CACHE_SIZE: 1000\n\nmetrics:\n  - ./metrics/rouge\n  - ./metrics/bleu\n  - source: ./metrics/sbert\n    disabled: true\n\nsummarizers:\n  - ./summarizers/featuresum\n  - ./summarizers/textrank\n  - source: ./summarizers/neuralsum\n    disabled: true\n    environment:\n      model: T5\n")),(0,r.kt)("p",null,"This will configure ",(0,r.kt)("inlineCode",{parentName:"p"},"BLEU"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ROUGE"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"Sentence-BERT")," as evaluation metrics, and ",(0,r.kt)("inlineCode",{parentName:"p"},"neuralsum")," with the ",(0,r.kt)("inlineCode",{parentName:"p"},"T5")," model, our custom ",(0,r.kt)("inlineCode",{parentName:"p"},"featuresum")," summarizer, and ",(0,r.kt)("inlineCode",{parentName:"p"},"TextRank")," as summarizers."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"If the ",(0,r.kt)("inlineCode",{parentName:"p"},"disabled")," option is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"true"),", the plugin will not be loaded but information about the plugin will still be displayed in the demo.\nThe disabled plugins in the example load large neural models. You can set ",(0,r.kt)("inlineCode",{parentName:"p"},"disabled")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"false")," if you have enough space on your system.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"With the ",(0,r.kt)("inlineCode",{parentName:"p"},"environment")," option you can specify environment variables for the container in which the plugin gets loaded.\nFor the ",(0,r.kt)("inlineCode",{parentName:"p"},"neuralsum")," plugin the ",(0,r.kt)("inlineCode",{parentName:"p"},"model")," variable is required.")),(0,r.kt)("p",null,"You can find the ",(0,r.kt)("inlineCode",{parentName:"p"},"configure.py")," file in the project root.",(0,r.kt)("br",{parentName:"p"}),"\n","Run the following command to generate a docker-compose file in the project root:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./configure.py --config my.sw-config.yaml gen-docker-compose\n")),(0,r.kt)("p",null,"Run the following command to start the application:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d\n")),(0,r.kt)("p",null,"The frontend will be exposed on ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:3000")," and the backend on ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:5000"),"\nGo to ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000")," to use the application."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The startup may take some time and the frontend usually becomes available earlier than the backend.\nAlso with the first startup the containers will be build and models will be downloaded.\nTherefore future startups won't take as long as the first.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"sw-config.yaml")," file in the project root will be used as the default config by ",(0,r.kt)("inlineCode",{parentName:"p"},"configure.py")," when ",(0,r.kt)("inlineCode",{parentName:"p"},"--config")," is omitted.\nInspect this file if you want to get an overview of what a full config looks like.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"For a overview of available plugins checkout the ",(0,r.kt)("inlineCode",{parentName:"p"},"metrics/")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"summarizers/")," folders in the repository")),(0,r.kt)("h2",{id:"extern-environment"},"Extern Environment"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"extern_environment")," option sets environment variables in all plugin containers.\nThe following environment variables are used to configure the plugin server."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"THREADS"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"The number of parallel calls to the summarize function.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BATCH_SIZE"),(0,r.kt)("td",{parentName:"tr",align:null},"32"),(0,r.kt)("td",{parentName:"tr",align:null},"This is the maximal length that the ",(0,r.kt)("inlineCode",{parentName:"td"},"batch")," argument will have (see ",(0,r.kt)("a",{parentName:"td",href:"writing-a-plugin#required-arguments"},"writing-a-plugin#required-arguments"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CACHE_SIZE"),(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"The size of the LRU cache. A unique sha256 key will be generated based on the input and the arguments. 0 disables the cache.")))))}m.isMDXComponent=!0}}]);